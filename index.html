<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Rapididate Test</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      padding: 30px;
      background-color: #f4f4f4;
    }
    h1 {
      color: #333;
    }
    .timer {
      font-size: 1.8em;
      margin: 15px 0;
      color: #006600;
    }
    .button {
      font-size: 1.3em;
      padding: 15px 30px;
      background-color: #0055ff;
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      margin: 15px;
    }
    .button:hover {
      background-color: #003fcc;
    }
    .hidden {
      display: none;
    }
    input[type="file"] {
      margin-top: 10px;
    }
    .captcha-box {
      margin-top: 20px;
    }
    canvas {
      border: 1px solid #ccc;
      margin: 10px auto;
      display: block;
    }
  </style>
</head>
<body>

  <h1>Rapididate Test</h1>
  <div class="timer" id="timer">Timp: 0 secunde</div>

  <button class="button" onclick="downloadPDF()">üì• DescarcƒÉ formularul PDF</button>

  <hr>

  <h2>IncarcƒÉ formularul completat</h2>
  <button class="button" onclick="showFirstCaptcha()">üîê √éncarcƒÉ formular completat</button>

  <div class="captcha-box hidden" id="firstCaptcha">
    <canvas id="captchaCanvas1" width="200" height="50"></canvas>
    <input type="text" id="captchaInput1" placeholder="Scrie codul aici">
    <br>
    <button class="button" onclick="validateCaptcha1()">VerificƒÉ CAPTCHA</button>
  </div>

  <div class="hidden" id="uploadFormularSection">
    <input type="file" accept="application/pdf" id="formularUpload">
  </div>

  <hr>

  <h2>√éncarcƒÉ celelalte 4 fi»ôiere PDF</h2>
  <div id="extraUploads">
    <input type="file" accept="application/pdf"><br>
    <input type="file" accept="application/pdf"><br>
    <input type="file" accept="application/pdf"><br>
    <input type="file" accept="application/pdf"><br>
  </div>

  <hr>

  <h2>Finalizare</h2>
  <button class="button" onclick="showFinalCaptcha()">‚úÖ FinalizeazƒÉ</button>

  <div class="captcha-box hidden" id="finalCaptcha">
    <canvas id="captchaCanvas2" width="200" height="50"></canvas>
    <input type="text" id="captchaInput2" placeholder="Scrie codul aici">
    <br>
    <button class="button" onclick="validateCaptcha2()">VerificƒÉ CAPTCHA final</button>
  </div>

  <div id="doneMessage" class="hidden">
    <h2>‚úîÔ∏è Gata! Formularul a fost trimis.</h2>
    <p>Timp total: <span id="finalTime">0</span> secunde</p>
  </div>

  <script>
    // Timer
    let startTime = Date.now();
    const timerElement = document.getElementById('timer');
    let timerInterval = setInterval(() => {
      const elapsed = Math.floor((Date.now() - startTime) / 1000);
      timerElement.textContent = `Timp: ${elapsed} secunde`;
    }, 1000);

    // DescarcƒÉ PDF
    function downloadPDF() {
      const link = document.createElement("a");
      link.href = "formular.pdf";
      link.download = "formular.pdf";
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
    }

    // CAPTCHA Generation
    function generateCaptchaText(length = 6) {
      const chars = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
      let result = '';
      for (let i = 0; i < length; i++) {
        result += chars.charAt(Math.floor(Math.random() * chars.length));
      }
      return result;
    }

    function drawCaptcha(canvasId, captchaText) {
      const canvas = document.getElementById(canvasId);
      const ctx = canvas.getContext('2d');
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.font = '30px Arial';
      ctx.fillStyle = '#333';
      ctx.fillText(captchaText, 20, 35);
      // Distrac»õie: linii random
      for (let i = 0; i < 5; i++) {
        ctx.beginPath();
        ctx.moveTo(Math.random() * canvas.width, Math.random() * canvas.height);
        ctx.lineTo(Math.random() * canvas.width, Math.random() * canvas.height);
        ctx.strokeStyle = '#ccc';
        ctx.stroke();
      }
    }

    // CAPTCHA 1
    let captcha1 = '';
    function showFirstCaptcha() {
      document.getElementById("firstCaptcha").classList.remove("hidden");
      captcha1 = generateCaptchaText();
      drawCaptcha("captchaCanvas1", captcha1);
    }
    function validateCaptcha1() {
      const input = document.getElementById("captchaInput1").value;
      if (input === captcha1) {
        document.getElementById("uploadFormularSection").classList.remove("hidden");
        alert("CAPTCHA validat cu succes!");
      } else {
        alert("CAPTCHA incorect. √éncearcƒÉ din nou.");
        captcha1 = generateCaptchaText();
        drawCaptcha("captchaCanvas1", captcha1);
      }
    }

    // CAPTCHA 2
    let captcha2 = '';
    function showFinalCaptcha() {
      document.getElementById("finalCaptcha").classList.remove("hidden");
      captcha2 = generateCaptchaText();
      drawCaptcha("captchaCanvas2", captcha2);
    }
    function validateCaptcha2() {
      const input = document.getElementById("captchaInput2").value;
      if (input === captcha2) {
        clearInterval(timerInterval);
        const elapsed = Math.floor((Date.now() - startTime) / 1000);
        document.getElementById("finalTime").textContent = elapsed;
        document.getElementById("doneMessage").classList.remove("hidden");
        alert("Totul este complet! Mul»õumim.");
      } else {
        alert("CAPTCHA final incorect. Re√ÆncercƒÉ.");
        captcha2 = generateCaptchaText();
        drawCaptcha("captchaCanvas2", captcha2);
      }
    }
  </script>

</body>
</html>
